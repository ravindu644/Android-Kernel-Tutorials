{
  "name": "Kernel Builder Minimal",
  "image": "mcr.microsoft.com/devcontainers/base:ubuntu-24.04",
  "customizations": {
    "vscode": {
      "extensions": [
        // VSCode C/C++ extension
        "ms-vscode.cpptools",
        "ms-vscode.cpptools-themes",

        // Makefile Tools
        "ms-vscode.makefile-tools",

        // patchwork.kernel.org right from VSCode
        "florent-revest.patchwork",

        // Syzlang syntax highlighting
        "florent-revest.vscode-syzlang",

        // x86(_64) assembly highlight (not helpful?)
        "13xforever.language-x86-64-assembly",

        // DeviceTree Language Support
        "plorefice.devicetree",

        // Kconfig syntax highlight
        "luveti.kconfig",

        // arm64 syntax highlight
        "MKornelsen.vscode-arm64",

        // SystemTap highlight
        "nzh21.systemtap-syntax",

        // Trailing Spaces
        "shardulm94.trailing-spaces"
      ],
      "settings": {
        // i am not offended by AI being integrated here
        // but i think it is better to disable it by default
        // to reduce annoyance
        "chat.disableAIFeatures": true
      }
    },
    "codespaces": {
      "openFiles": [
        "README.md"
      ]
    }
  },
  "remoteEnv": {
    "DEBIAN_FRONTEND": "noninteractive",
    "KBUILD_BUILD_USER": "builder"
  },
  "remoteUser": "vscode",
  "initializeCommand": "./.devcontainer/builder-min/initializecommand.sh",
  "onCreateCommand": "sudo ./.devcontainer/builder-min/oncreatecontainer.sh",
  "postCreateCommand": "./.devcontainer/builder-min/postcreatecontainer.sh",
  "runArgs": ["--privileged"]
}