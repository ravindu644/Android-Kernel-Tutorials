{
  "name": "Kernel Builder Full",
  "image": "mcr.microsoft.com/devcontainers/base:ubuntu-24.04",
  "features": {
    "ghcr.io/devcontainers-extra/features/neofetch:1": {},
    "ghcr.io/devcontainers-extra/features/wget-apt-get:1": {},
    "ghcr.io/devcontainers-extra/features/tmux-apt-get:1": {},
    "ghcr.io/devcontainers-extra/features/curl-apt-get:1": {}
  },
  "customizations": {
    "vscode": {
      "extensions": [
        // VSCode C/C++ extension
        "ms-vscode.cpptools",

        // Makefile Tools
        "ms-vscode.makefile-tools",

        // patchwork.kernel.org right from VSCode
        "florent-revest.patchwork",

        // Syzlang syntax highlighting
        "florent-revest.vscode-syzlang",

        // Syzkaller coverage overlay (helpful?)
        "florent-revest.syzkaller-coverage",

        // x86(_64) assembly highlight (not helpful?)
        "13xforever.language-x86-64-assembly",

        // DeviceTree Language Support
        "plorefice.devicetree",

        // Kconfig syntax highlight
        "luveti.kconfig",

        // checkpatch
        "idanp.checkpatch",

        // arm64 syntax highlight
        "MKornelsen.vscode-arm64",

        // SystemTap highlight
        "nzh21.systemtap-syntax",

        // Trailing Spaces
        "shardulm94.trailing-spaces"
      ]
    },
    "codespaces": {
      "openFiles": [
        "README.md"
      ]
    }
  },
  "remoteEnv": {
    "DEBIAN_FRONTEND": "noninteractive",
    "KBUILD_BUILD_USER": "builder"
  },
  "remoteUser": "vscode",
  "initializeCommand": "./.devcontainer/builder-min/initializecommand.sh",
  "onCreateCommand": "sudo ./.devcontainer/builder-min/oncreatecontainer.sh",
  "postCreateCommand": "./.devcontainer/builder-min/postcreatecontainer.sh",
  "runArgs": ["--privileged"]
}